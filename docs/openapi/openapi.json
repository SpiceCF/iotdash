{"swagger":"2.0","info":{"description":"Describe your API","version":"SNAPSHOT","termsOfService":"http://swagger.io/terms/","title":"Example API Doc","license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"}},"basePath":"/api/v1","schemes":["http"],"paths":{"/auth/login":{"post":{"tags":["Auth"],"summary":"Login","description":"Login to the system","operationId":"postAuthLogin","produces":["application/json"],"consumes":["application/json"],"parameters":[{"in":"body","name":"body","description":"Login request","required":true,"schema":{"$ref":"#/definitions/authLoginRequest"}}],"responses":{"200":{"description":"Successfully logged in","schema":{"$ref":"#/definitions/authLoginResponse"}}}}},"/auth/register":{"post":{"tags":["Auth"],"summary":"Register","description":"Register to the system","operationId":"postAuthRegister","produces":["application/json"],"consumes":["application/json"],"parameters":[{"in":"body","name":"body","description":"Register request","required":true,"schema":{"$ref":"#/definitions/authRegisterRequest"}}],"responses":{"200":{"description":"Successfully registered","schema":{"$ref":"#/definitions/authRegisterResponse"}}}}},"/sensors":{"get":{"tags":["Sensor"],"summary":"List sensors","description":"List sensors","operationId":"getSensors","produces":["application/json"],"consumes":["application/json"],"responses":{"200":{"description":"ListSensorsResponse","schema":{"$ref":"#/definitions/sensorListSensorsResponse"}}}},"post":{"tags":["Sensor"],"summary":"Create sensor","description":"Create sensor","operationId":"postSensors","produces":["application/json"],"consumes":["application/json"],"parameters":[{"in":"body","name":"body","description":"CreateSensorRequest","required":true,"schema":{"$ref":"#/definitions/sensorCreateSensorRequest"}}],"responses":{"200":{"description":"CreateSensorResponse","schema":{"$ref":"#/definitions/sensorCreateSensorResponse"}}}}},"/sensors/thermometer/logs":{"post":{"tags":["Sensor"],"summary":"Create thermometer log","description":"Create thermometer log","operationId":"postSensorsThermometerLogs","produces":["application/json"],"consumes":["application/json"],"parameters":[{"in":"body","name":"body","description":"CreateSensorLogRequest","required":true,"schema":{"$ref":"#/definitions/sensorCreateThermometerLogRequest"}}],"responses":{"200":{"description":"CreateSensorLogResponse","schema":{"$ref":"#/definitions/sensorCreateThermometerLogResponse"}}}}},"/sensors/{id}/logs":{"get":{"tags":["Sensor"],"summary":"List sensor logs","description":"List sensor logs","operationId":"getSensorsIdLogs","produces":["application/json"],"consumes":["application/json"],"parameters":[{"in":"path","name":"id","description":"Sensor ID","required":true,"type":"string"}],"responses":{"200":{"description":"ListSensorLogsResponse","schema":{"$ref":"#/definitions/sensorListSensorLogsResponse"}}}}},"/sensors/{id}/logs/metric":{"get":{"tags":["Sensor"],"summary":"List sensor metric logs","description":"List sensor metric logs","operationId":"getSensorsIdLogsMetric","produces":["application/json"],"consumes":["application/json"],"parameters":[{"in":"path","name":"id","description":"Sensor ID","required":true,"type":"string"},{"in":"query","name":"key","description":"Metric key ex. temperature, humidity","required":true,"type":"string"},{"in":"query","name":"from","description":"From timestamp with format RFC3339","required":true,"type":"string"},{"in":"query","name":"to","description":"To timestamp with format RFC3339","required":true,"type":"string"},{"in":"query","name":"interval","description":"Interval (day, hour, minute)","required":true,"type":"string"}],"responses":{"200":{"description":"ListSensorMetricLogsResponse","schema":{"$ref":"#/definitions/sensorListSensorMetricLogsResponse"}}}}},"/simulator/thermometer":{"get":{"tags":["Simulator.Thermometer"],"summary":"List thermometers","description":"List thermometers","operationId":"getSimulatorThermometer","produces":["application/json"],"consumes":["application/json"],"responses":{"200":{"description":"ListThermometersResponse","schema":{"$ref":"#/definitions/simulatorListThermometersResponse"}}}},"post":{"tags":["Simulator.Thermometer"],"summary":"Create thermometer","description":"Create thermometer","operationId":"postSimulatorThermometer","produces":["application/json"],"consumes":["application/json"],"parameters":[{"in":"body","name":"body","description":"CreateThermometerRequest","required":true,"schema":{"$ref":"#/definitions/simulatorCreateThermometerRequest"}}],"responses":{"200":{"description":"CreateThermometerResponse","schema":{"$ref":"#/definitions/simulatorCreateThermometerResponse"}}}}},"/simulator/thermometer/{id}":{"get":{"tags":["Simulator.Thermometer"],"summary":"Get thermometer","description":"Get thermometer","operationId":"getSimulatorThermometerId","produces":["application/json"],"consumes":["application/json"],"parameters":[{"in":"path","name":"id","description":"Thermometer ID","required":true,"type":"string"}],"responses":{"200":{"description":"GetThermometerResponse","schema":{"$ref":"#/definitions/simulatorGetThermometerResponse"}}}}},"/simulator/thermometer/{id}/config":{"put":{"tags":["Simulator.Thermometer"],"summary":"Update thermometer config","description":"Update thermometer config","operationId":"putSimulatorThermometerIdConfig","produces":["application/json"],"consumes":["application/json"],"parameters":[{"in":"path","name":"id","description":"Thermometer ID","required":true,"type":"string"},{"in":"body","name":"body","description":"UpdateThermometerConfigRequest","required":true,"schema":{"$ref":"#/definitions/simulatorUpdateThermometerConfigRequest"}}],"responses":{"200":{"description":"UpdateThermometerConfigResponse","schema":{"$ref":"#/definitions/simulatorUpdateThermometerConfigResponse"}}}}},"/simulator/thermometer/{id}/history":{"get":{"tags":["Simulator.Thermometer"],"summary":"Get thermometer history","description":"Get thermometer history","operationId":"getSimulatorThermometerIdHistory","produces":["application/json"],"consumes":["application/json"],"parameters":[{"in":"path","name":"id","description":"Thermometer ID","required":true,"type":"string"}],"responses":{"200":{"description":"GetTMHistoryResponse","schema":{"$ref":"#/definitions/simulatorGetTMHistoryResponse"}}}}},"/simulator/thermometer/{id}/start":{"post":{"tags":["Simulator.Thermometer"],"summary":"Start thermometer engine","description":"Start thermometer engine","operationId":"postSimulatorThermometerIdStart","produces":["application/json"],"consumes":["application/json"],"parameters":[{"in":"path","name":"id","description":"Thermometer ID","required":true,"type":"string"}],"responses":{"200":{"description":"EngineSwitchResponse","schema":{"$ref":"#/definitions/simulatorEngineSwitchResponse"}}}}},"/simulator/thermometer/{id}/stop":{"post":{"tags":["Simulator.Thermometer"],"summary":"Stop thermometer engine","description":"Stop thermometer engine","operationId":"postSimulatorThermometerIdStop","produces":["application/json"],"consumes":["application/json"],"parameters":[{"in":"path","name":"id","description":"Thermometer ID","required":true,"type":"string"}],"responses":{"200":{"description":"EngineSwitchResponse","schema":{"$ref":"#/definitions/simulatorEngineSwitchResponse"}}}}},"/users/me":{"get":{"tags":["User"],"summary":"Get current user","description":"Get current user profile","operationId":"getUsersMe","produces":["application/json"],"consumes":["application/json"],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/userGetMeResponse"}}}}},"/users/me/settings":{"get":{"tags":["User"],"summary":"Get current user settings","description":"Get current user settings","operationId":"getUsersMeSettings","produces":["application/json"],"consumes":["application/json"],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/userGetMeSettingsResponse"}}}}}},"definitions":{"authLoginErrorResponseData":{"type":"object","properties":{"token":{"type":"string","example":"token"}}},"authLoginRequest":{"type":"object","properties":{"password":{"type":"string","example":"password"},"username":{"type":"string","example":"johndoe"}}},"authLoginResponse":{"type":"object","properties":{"data":{"$ref":"#/definitions/authLoginErrorResponseData"},"status":{"type":"integer","format":"int32","example":"200"}}},"authRegisterErrorResponseData":{"type":"object","properties":{"user_id":{"example":"123e4567-e89b-12d3-a456-426614174000"}}},"authRegisterRequest":{"type":"object","properties":{"email":{"type":"string","example":"john.doe@example.com"},"full_name":{"type":"string","example":"John Doe"},"password":{"type":"string","example":"password"},"username":{"type":"string","example":"johndoe"}}},"authRegisterResponse":{"type":"object","properties":{"data":{"$ref":"#/definitions/authRegisterErrorResponseData"},"status":{"type":"integer","format":"int32","example":"200"}}},"entitySensor":{"type":"object","properties":{"configs":{"type":"array","items":{"$ref":"#/definitions/entitySensorConfig"}},"created_at":{"$ref":"#/definitions/timeTime"},"device_id":{},"id":{},"name":{"type":"string"},"owner_id":{},"type":{"type":"string"},"updated_at":{"$ref":"#/definitions/timeTime"}}},"entitySensorConfig":{"type":"object","properties":{"created_at":{"$ref":"#/definitions/timeTime"},"id":{},"key":{"type":"string"},"sensor_id":{},"updated_at":{"$ref":"#/definitions/timeTime"},"value":{"type":"array","items":{"type":"integer","format":"int32"}}}},"entitySensorLog":{"type":"object","properties":{"device_id":{"example":"123e4567-e89b-12d3-a456-426614174000"},"id":{},"key":{"type":"string","example":"temperature"},"sensor_type":{"type":"string","example":"thermometer"},"timestamp":{"$ref":"#/definitions/timeTime","example":"2024-10-29T22:40:03.410461+07:00"},"value":{"type":"number","format":"double","example":"25.5"}}},"entityThermometer":{"type":"object","properties":{"config":{"$ref":"#/definitions/entityThermometerConfig"},"connected":{"type":"boolean"},"created_at":{"$ref":"#/definitions/timeTime"},"id":{},"ip_address":{"type":"string"},"is_active":{"type":"boolean"},"owner_id":{},"temperature":{"type":"number","format":"double"},"updated_at":{"$ref":"#/definitions/timeTime"}}},"entityThermometerConfig":{"type":"object","properties":{"connection":{"type":"string","example":"http://localhost:8080/api/v1/sensors/thermometer/logs"},"max_temperature":{"type":"number","format":"double","example":"100"},"min_temperature":{"type":"number","format":"double","example":"10"}}},"entityThermometerHistory":{"type":"object","properties":{"id":{"example":"123e4567-e89b-12d3-a456-426614174000"},"temperature":{"type":"number","format":"double","example":"25.5"},"thermometer_id":{"example":"123e4567-e89b-12d3-a456-426614174000"},"timestamp":{"$ref":"#/definitions/timeTime","example":"2024-10-29T22:40:03.410461+07:00"}}},"entityUser":{"type":"object","properties":{"created_at":{"$ref":"#/definitions/timeTime"},"email":{"type":"string"},"full_name":{"type":"string"},"id":{},"password":{"type":"string"},"sensors":{"type":"array","items":{"$ref":"#/definitions/entitySensor"}},"settings":{"type":"array","items":{"$ref":"#/definitions/entityUserSetting"}},"thermometers":{"type":"array","items":{"$ref":"#/definitions/entityThermometer"}},"updated_at":{"$ref":"#/definitions/timeTime"},"username":{"type":"string"}}},"entityUserSetting":{"type":"object","properties":{"created_at":{"$ref":"#/definitions/timeTime"},"id":{},"key":{"type":"string"},"owner_id":{},"updated_at":{"$ref":"#/definitions/timeTime"},"value":{"type":"array","items":{"type":"integer","format":"int32"}}}},"sensorCreateSensorRequest":{"type":"object","properties":{"device_id":{"example":"123e4567-e89b-12d3-a456-426614174000"},"name":{"type":"string","example":"bedroom"},"type":{"type":"string","example":"thermometer"}}},"sensorCreateSensorResponse":{"type":"object","properties":{"data":{"$ref":"#/definitions/entitySensor"},"status":{"type":"integer","format":"int32","example":"200"}}},"sensorCreateThermometerLogRequest":{"type":"object","properties":{"device_id":{"example":"123e4567-e89b-12d3-a456-426614174000"},"id":{},"key":{"type":"string","example":"temperature"},"sensor_type":{"type":"string","example":"thermometer"},"timestamp":{"type":"string","example":"2024-10-29T22:40:03.410461+07:00"},"value":{"type":"number","format":"double","example":"25.5"}}},"sensorCreateThermometerLogResponse":{"type":"object","properties":{"message":{"type":"string","example":"Sensor log created"},"status":{"type":"integer","format":"int32","example":"200"}}},"sensorListSensorLogsResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/definitions/entitySensorLog"}},"status":{"type":"integer","format":"int32","example":"200"}}},"sensorListSensorMetricLogsResponse":{"type":"object","properties":{"data":{"$ref":"#/definitions/sensorListSensorMetricLogsResponseData"},"status":{"type":"integer","format":"int32","example":"200"}}},"sensorListSensorMetricLogsResponseData":{"type":"object","properties":{"avg":{"type":"array","items":{"$ref":"#/definitions/sqliteTimeSeries"}},"max":{"type":"array","items":{"$ref":"#/definitions/sqliteTimeSeries"}},"min":{"type":"array","items":{"$ref":"#/definitions/sqliteTimeSeries"}}}},"sensorListSensorsResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/definitions/entitySensor"}},"status":{"type":"integer","format":"int32","example":"200"}}},"simulatorCreateThermometerRequest":{"type":"object","properties":{"config":{"$ref":"#/definitions/entityThermometerConfig"}}},"simulatorCreateThermometerResponse":{"type":"object","properties":{"data":{"$ref":"#/definitions/entityThermometer"},"status":{"type":"integer","format":"int32","example":"200"}}},"simulatorEngineSwitchResponse":{"type":"object","properties":{"message":{"type":"string","example":"Engine started"},"status":{"type":"integer","format":"int32","example":"200"}}},"simulatorGetTMHistoryResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/definitions/entityThermometerHistory"}},"status":{"type":"integer","format":"int32","example":"200"}}},"simulatorGetThermometerResponse":{"type":"object","properties":{"data":{"$ref":"#/definitions/entityThermometer"},"status":{"type":"integer","format":"int32","example":"200"}}},"simulatorListThermometersResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/definitions/entityThermometer"}},"status":{"type":"integer","format":"int32","example":"200"}}},"simulatorUpdateThermometerConfigRequest":{"type":"object","properties":{"config":{"$ref":"#/definitions/entityThermometerConfig"}}},"simulatorUpdateThermometerConfigResponse":{"type":"object","properties":{"message":{"type":"string","example":"Thermometer config updated"},"status":{"type":"integer","format":"int32","example":"200"}}},"sqliteTimeSeries":{"type":"object","properties":{"key":{"type":"string","example":"temperature"},"timestamp":{"$ref":"#/definitions/timeTime","example":"2024-11-05T00:00:00Z"},"value":{"type":"number","format":"double","example":"25.5"}}},"timeTime":{"type":"object"},"userGetMeResponse":{"type":"object","properties":{"data":{"$ref":"#/definitions/entityUser"},"status":{"type":"integer","format":"int32","example":"200"}}},"userGetMeSettingsResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/definitions/entityUserSetting"}},"status":{"type":"integer","format":"int32","example":"200"}}}},"host":"localhost:8080","securityDefinitions":{"BearerAuth":{"type":"apiKey","description":"JWT obtained by logging in","name":"Authorization","in":"header"}},"security":[{"BearerAuth":[]}]}
